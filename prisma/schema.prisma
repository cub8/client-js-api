generator client {
  provider      = "prisma-client"
  output        = "../generated/prisma"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Client {
  id           Int           @id @default(autoincrement())
  firstName    String        @db.VarChar(40)
  lastName     String        @db.VarChar(80)
  pesel        String        @db.Char(11)
  status       Status
  note         String?
  createdAt    DateTime      @default(now()) @db.Timestamp(6)
  updatedAt    DateTime?     @updatedAt
  integrations Integration[]
}

model Integration {
  id        Int             @id @default(autoincrement())
  clientId  Int
  type      IntegrationType
  createdAt DateTime        @default(now()) @db.Timestamp(6)
  client    Client          @relation(fields: [clientId], references: [id], onDelete: Cascade)
}

enum Status {
  REGISTERED
  INTEGRATED
  RESIGNED
}

enum IntegrationType {
  API
  INTERNAL
}
